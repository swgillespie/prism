{
  "sources": {
    "demo": {
      "type": "demo_logs",
      "format": "json",
      "framing": {
        "method": "newline_delimited"
      },
      "interval": 0.1
    }
  },
  "transforms": {
    "remap": {
      "type": "remap",
      "inputs": ["demo"],
      "file": "./remap.vrl"
    }
  },
  "sinks": {
    "s3": {
      "type": "aws_s3",
      "inputs": ["remap"],
      "bucket": "ingest",
      "endpoint": "http://localhost:4566",
      "batch": {
        "timeout_secs": 15
      },
      "encoding": {
        "codec": "json"
      },
      "framing": {
        "method": "newline_delimited"
      },
      "compression": "none",
      "filename_append_uuid": true
    }
  }
}